{% extends "base.html" %}

{% block scripts %}
  {{ super() }}
  <script>
    const endTime = new Date("{{ COUNTDOWN_END }}");
    const countdown = document.getElementById("countdown-timer");

    if (countdown) {
      setInterval(() => {
        const now = new Date();
        const diff = endTime - now;

        if (diff < 0) {
          countdown.textContent = "Expired";
          return;
        }

        const hours = Math.floor(diff / 3600000);
        const minutes = Math.floor((diff % 3600000) / 60000);
        
        // Format to HH:MM with leading zeros
        const hh = String(hours).padStart(2, '0');
        const mm = String(minutes).padStart(2, '0');

        countdown.textContent = `${hh}:${mm} -`;
      }, 1000); // Update every second for a live feel
    }
  </script>
{% endblock %}
